<form>
  <div *ngIf="isLoading">
    <app-spinner></app-spinner>
  </div>

  <div *ngIf="!isLoading">
    <form [formGroup]="contactForm" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label>Name</label>
        <input
          formControlName="name"
          name="name"
          type="text"
          class="form-control"
        />
        <span
          *ngIf="
            !contactForm.get('name').valid && contactForm.get('name').touched
          "
        >
          <p
            *ngIf="
              contactForm.get('name').errors['required'] &&
              contactForm.get('name').touched
            "
            class="error-message"
          >
            Name is required!
          </p>

          <p
            class="error-message"
            *ngIf="
              contactForm.get('name').errors['nameInvalid'] &&
              contactForm.get('name').touched
            "
          >
            Another contact with the same email or phone number exists!
          </p>
        </span>
      </div>

      <div class="form-group">
        <label>Email address</label>
        <input
          formControlName="email"
          name="email"
          type="email"
          class="form-control"
        />

        <span
          *ngIf="
            !contactForm.get('email').valid && contactForm.get('email').touched
          "
        >
          <p
            *ngIf="
              contactForm.get('email').errors['required'] &&
              contactForm.get('email').touched
            "
            class="error-message"
          >
            email is required!
          </p>

          <p
            class="error-message"
            *ngIf="
              contactForm.get('email').errors['emailInvalid'] &&
              contactForm.get('email').touched
            "
          >
            Another contact with the same email exists!
          </p>
        </span>
      </div>

      <div class="form-group">
        <label>Phone</label>
        <input
          formControlName="phone"
          name="phone"
          type="number"
          class="form-control"
        />
        <span
          *ngIf="
            !contactForm.get('phone').valid && contactForm.get('phone').touched
          "
        >
          <p
            *ngIf="
              contactForm.get('phone').errors['required'] &&
              contactForm.get('phone').touched
            "
            class="error-message"
          >
            phone is required!
          </p>

          <p
            class="error-message"
            *ngIf="
              contactForm.get('phone').errors['phoneInvalid'] &&
              contactForm.get('phone').touched
            "
          >
            Another contact with the same phone number exists!
          </p>
        </span>
      </div>

      <div class="float-right mt-5">
        <button
          type="submit"
          class="btn btn-success"
          [disabled]="!contactForm.valid"
        >
          <i class="fa fa-floppy-o" aria-hidden="true"></i>
          Save
        </button>

        <a routerLink="/" class="btn btn-secondary mx-md-2">
          <i class="fa fa-times" aria-hidden="true"></i>
          Cancel
        </a>
      </div>
    </form>
  </div>
</form>
